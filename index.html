<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Random Team</title>

<style>
body{
  margin:0;
  font-family: sans-serif;
  background: linear-gradient(135deg,#0f2027,#203a43,#2c5364);
  color:#fff;
}
.container{
  max-width:900px;
  margin:auto;
  padding:20px;
}
h2{text-align:center;margin-bottom:10px}
.card{
  background:rgba(0,0,0,.45);
  border-radius:12px;
  padding:15px;
  margin-bottom:15px;
}
input{
  width:100%;
  padding:12px;
  border-radius:8px;
  border:none;
  font-size:16px;
}
.buttons{
  display:flex;
  gap:10px;
  margin-top:10px;
}
button{
  flex:1;
  padding:12px;
  border:none;
  border-radius:10px;
  font-size:16px;
  cursor:pointer;
}
.player{background:#1e90ff}
.keeper{background:#e74c3c}
.submit{background:linear-gradient(135deg,#00ffcc,#00bfff);color:#000;font-weight:bold}
.admin{
  position:fixed;
  top:10px;
  right:10px;
  font-size:12px;
  cursor:pointer;
  opacity:.6;
}
.teams{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:10px;
}
ul{list-style:none;padding:0;margin:0}
li{padding:4px 0;border-bottom:1px solid rgba(255,255,255,.1)}
small{opacity:.7}
</style>
</head>

<body>
<div class="admin" onclick="adminAction()">Admin</div>

<div class="container">
  <h2>Random Team</h2>

  <div class="card" id="formCard">
    <input id="name" placeholder="Ù†Ø§Ù… Ø®ÙˆØ¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯">
    <div class="buttons">
      <button class="player" onclick="setRole('player')">Ø¨Ø§Ø²ÛŒÚ©Ù†</button>
      <button class="keeper" onclick="setRole('keeper')">Ø¯Ø±ÙˆØ§Ø²Ù‡â€ŒØ¨Ø§Ù†</button>
    </div>
    <button class="submit" onclick="register()">Ø«Ø¨Øª</button>
  </div>

  <div class="teams">
    <div class="card">
      <h3>Team A</h3>
      <ul id="teamA"></ul>
      <small>ØªØ¹ÙˆÛŒØ¶ÛŒ</small>
      <ul id="subA"></ul>
    </div>
    <div class="card">
      <h3>Team B</h3>
      <ul id="teamB"></ul>
      <small>ØªØ¹ÙˆÛŒØ¶ÛŒ</small>
      <ul id="subB"></ul>
    </div>
  </div>
</div>

<script>
const key = "random-team-data";
const lockKey = "random-team-locked";
let role = null;

function load(){
  return JSON.parse(localStorage.getItem(key)) || {
    A:{players:[],keeper:null,subs:[]},
    B:{players:[],keeper:null,subs:[]}
  };
}
function save(data){
  localStorage.setItem(key,JSON.stringify(data));
}
function render(){
  const d = load();
  teamA.innerHTML = "";
  teamB.innerHTML = "";
  subA.innerHTML = "";
  subB.innerHTML = "";

  if(d.A.keeper) teamA.innerHTML += `<li>ðŸ§¤ ${d.A.keeper}</li>`;
  d.A.players.forEach(n=>teamA.innerHTML+=`<li>${n}</li>`);
  d.A.subs.forEach(n=>subA.innerHTML+=`<li>${n}</li>`);

  if(d.B.keeper) teamB.innerHTML += `<li>ðŸ§¤ ${d.B.keeper}</li>`;
  d.B.players.forEach(n=>teamB.innerHTML+=`<li>${n}</li>`);
  d.B.subs.forEach(n=>subB.innerHTML+=`<li>${n}</li>`);
}

function setRole(r){
  role=r;
}

function register(){
  if(localStorage.getItem(lockKey)) return alert("Ø´Ù…Ø§ Ù‚Ø¨Ù„Ø§Ù‹ Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ú©Ø±Ø¯Ù‡â€ŒØ§ÛŒØ¯");
  const name = document.getElementById("name").value.trim();
  if(!name || !role) return alert("Ù†Ø§Ù… Ùˆ Ù†Ù‚Ø´ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯");

  let d = load();
  let teams = ["A","B"];
  teams.sort(()=>Math.random()-0.5);

  for(let t of teams){
    let team = d[t];
    if(role==="keeper" && !team.keeper){
      team.keeper = name;
      finish(d); return;
    }
    if(role==="player" && team.players.length < 5){
      team.players.push(name);
      finish(d); return;
    }
  }

  // ØªØ¹ÙˆÛŒØ¶ÛŒ
  d[teams[0]].subs.push(name);
  finish(d);
}

function finish(d){
  save(d);
  localStorage.setItem(lockKey,"1");
  document.getElementById("formCard").style.display="none";
  render();
}

function adminAction(){
  const pass = prompt("Ø±Ù…Ø² Ø§Ø¯Ù…ÛŒÙ†:");
  if(pass!=="admin12345") return;
  if(confirm("Ø±ÛŒØ³Øª Ø´ÙˆØ¯ØŸ")){
    localStorage.removeItem(key);
    localStorage.removeItem(lockKey);
    location.reload();
  }
}

render();
</script>
</body>
</html>
