<!doctype html>
<html lang="fa">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Team Shuffle â€” ØªÛŒÙ…â€ŒÚ©Ø´ÛŒ Ø´Ø§Ù†Ø³ÛŒ âš½</title>
<link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@300;500;700&display=swap" rel="stylesheet">
<style>
:root{
  --bg-dark:#031022; --card:#071424;
  --accent-blue:#0077f0; --accent-yellow:#ffd100; --accent-red:#ff5252; --accent-green:#00d27a;
  --muted:#9fb0d6;
}
*{box-sizing:border-box;font-family:'Vazirmatn',sans-serif}
html,body{height:100%;margin:0;background:linear-gradient(180deg,var(--bg-dark),#000);color:#eaf2ff}
.app{min-height:100vh;display:flex;align-items:center;justify-content:center;padding:24px}
.wrapper{width:100%;max-width:980px}
.card{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); border-radius:14px;padding:18px;box-shadow:0 30px 80px rgba(0,0,0,0.7);border:1px solid rgba(255,255,255,0.02)}
.header{display:flex;align-items:center;gap:12px;margin-bottom:12px}
.logo{font-size:28px;color:var(--accent-yellow);font-weight:800}
.subtitle{color:var(--muted);font-size:13px}
.grid{display:grid;grid-template-columns:1fr 360px;gap:14px}
@media (max-width:920px){ .grid{grid-template-columns:1fr} }
.splash{position:fixed;inset:0;z-index:60;display:flex;align-items:center;justify-content:center;flex-direction:column;background:linear-gradient(180deg,rgba(2,10,26,0.96),rgba(2,10,26,0.9));transition:opacity .5s ease;backdrop-filter: blur(4px)}
.splash.hidden{opacity:0;pointer-events:none}
.ball{font-size:160px;transform-origin:center;animation:shrink 1.2s ease forwards}
@keyframes shrink{
  0%{transform:scale(2.4);opacity:0}
  20%{opacity:1}
  100%{transform:scale(1);opacity:1}
}
.hero-text{margin-top:14px;color:var(--accent-yellow);font-weight:800;font-size:20px}
.hero-sub{color:var(--muted);margin-top:6px}
.form-row{margin-bottom:12px}
input[type="text"]{width:100%;padding:12px;border-radius:10px;border:none;background:rgba(255,255,255,0.02);color:inherit;font-size:15px}
.roles{display:flex;gap:8px}
.role{flex:1;padding:12px;border-radius:10px;text-align:center;cursor:pointer;border:2px solid transparent;background:linear-gradient(180deg,rgba(255,255,255,0.01),rgba(0,0,0,0.03));user-select:none}
.role.active{box-shadow:0 14px 40px rgba(0,0,0,0.6)}
.role.player.active{border-image:linear-gradient(90deg,var(--accent-blue),var(--accent-green)) 1}
.role.gk.active{border-image:linear-gradient(90deg,var(--accent-yellow),var(--accent-red)) 1}
.btn{display:inline-block;padding:12px 16px;border-radius:12px;border:none;background:linear-gradient(90deg,var(--accent-blue),var(--accent-green));color:#001218;font-weight:800;cursor:pointer;width:100%;font-size:15px}
.small{padding:8px 10px;border-radius:10px;border:1px solid rgba(255,255,255,0.03);background:transparent;color:var(--muted);cursor:pointer}
.note{color:var(--muted);font-size:13px;margin-top:8px}
.list{background:rgba(255,255,255,0.02);padding:10px;border-radius:10px;max-height:380px;overflow:auto}
.list h4{margin:0 0 8px 0;color:var(--accent-yellow)}
ul{list-style:none;padding:0;margin:0}
li{display:flex;justify-content:space-between;align-items:center;padding:8px;border-radius:8px;margin-bottom:8px;background:rgba(0,0,0,0.05)}
.badge{font-size:12px;padding:6px 8px;border-radius:8px;background:rgba(255,255,255,0.03)}
.footer{display:flex;justify-content:space-between;align-items:center;margin-top:12px;gap:10px}
.reset-btn{padding:10px 12px;border-radius:10px;background:linear-gradient(90deg,var(--accent-red),var(--accent-yellow));color:#001;font-weight:800;border:none;cursor:pointer}
.modal-back{position:fixed;inset:0;background:rgba(0,0,0,0.6);display:none;align-items:center;justify-content:center;z-index:80}
.modal{background:linear-gradient(180deg,#071428,#06121d);padding:18px;border-radius:12px;width:360px;box-shadow:0 20px 60px rgba(0,0,0,0.7);border:1px solid rgba(255,255,255,0.03)}
.modal h4{margin:0 0 8px 0;color:var(--accent-yellow)}
.modal input{width:100%;padding:10px;border-radius:8px;border:none;background:rgba(255,255,255,0.02);color:inherit;margin-bottom:10px}
.bg-field{position:fixed;inset:0;z-index:-1;background-image:url('https://images.unsplash.com/photo-1504542985069-17f94f5f6b6a?q=80&w=1600&auto=format&fit=crop&ixlib=rb-4.0.3&s=0f9f5c5c3c0bb2f0b1a0e6e3b8f7f3c6');background-size:cover;background-position:center;filter:brightness(.35);opacity:.95}
.counter{font-weight:800;color:var(--accent-yellow)}
.small-note{font-size:12px;color:var(--muted)}
</style>
</head>
<body>
<div class="bg-field"></div>

<div class="splash" id="splash">
  <div class="ball">âš½</div>
  <div class="hero-text">Ø®ÙˆØ´ Ø¢Ù…Ø¯ÛŒ Ø¨Ù‡ Team Shuffle</div>
  <div class="hero-sub">ØªÛŒÙ…â€ŒÚ©Ø´ÛŒ Ø´Ø§Ù†Ø³ÛŒ ÙÙˆØªØ¨Ø§Ù„ â€” Ø³Ø§Ø¯Ù‡ Ùˆ Ø¬Ø°Ø§Ø¨</div>
</div>

<div class="app">
  <div class="wrapper">
    <div class="card">
      <div class="header">
        <div class="logo">âš½ Team Shuffle</div>
        <div class="subtitle">Ø¯Ùˆ ØªÛŒÙ… â€” Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ø¢ÙÙ„Ø§ÛŒÙ† â€” Ù‡Ø± Ø¯Ø³ØªÚ¯Ø§Ù‡ ÛŒÚ©â€ŒØ¨Ø§Ø±</div>
      </div>

      <div class="grid">
        <!-- left: registration -->
        <div>
          <div style="margin-bottom:10px;font-weight:800;color:var(--accent-yellow)">Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… â€” Ù‚Ø¯Ù…â€ŒØ¨Ù‡â€ŒÙ‚Ø¯Ù…</div>

          <!-- step 1: name -->
          <div id="step-name" class="step">
            <div class="form-row">
              <input id="nameInput" type="text" placeholder="ÙØ§Ù…ÛŒÙ„ÛŒ Ø¨Ù‡ Ø§Ù†Ú¯Ù„ÛŒØ³ÛŒ â€” Ù…Ø«Ø§Ù„: sheikh" />
            </div>
            <div class="form-row">
              <button id="toRole" class="btn">Ø§Ø¯Ø§Ù…Ù‡ â€” Ø§Ù†ØªØ®Ø§Ø¨ Ù†Ù‚Ø´</button>
            </div>
            <div class="note">Ø§ÙˆÙ„ Ù†Ø§Ù…Øª Ø±Ùˆ ÙˆØ§Ø±Ø¯ Ú©Ù†Ø› Ø¨Ø¹Ø¯ Ù†Ù‚Ø´ (Ø¨Ø§Ø²ÛŒÚ©Ù† ÛŒØ§ Ø¯Ø±ÙˆØ§Ø²Ù‡â€ŒØ¨Ø§Ù†)</div>
          </div>

          <!-- step 2: role -->
          <div id="step-role" class="step" style="display:none">
            <div style="font-weight:800;margin-bottom:8px">Ù†Ù‚Ø´ Ø®ÙˆØ¯ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†</div>
            <div class="roles">
              <div id="rolePlayer" class="role player" data-role="player">âš½ Ø¨Ø§Ø²ÛŒÚ©Ù†</div>
              <div id="roleGk" class="role gk" data-role="gk">ğŸ§¤ Ø¯Ø±ÙˆØ§Ø²Ù‡â€ŒØ¨Ø§Ù†</div>
            </div>
            <div style="margin-top:12px">
              <button id="registerBtn" class="btn">Ø«Ø¨Øª Ùˆ Ù¾ÛŒÙˆØ³ØªÙ† âœ…</button>
            </div>
            <div class="note">ØªÙˆØ¬Ù‡: Ù‡Ø± Ø¯Ø³ØªÚ¯Ø§Ù‡ ÙÙ‚Ø· ÛŒÚ© Ø¨Ø§Ø± Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ø¯ Ø«Ø¨Øª Ú©Ù†Ø¯.</div>
          </div>

          <div id="message" style="display:none;margin-top:12px;padding:10px;border-radius:10px"></div>

          <div style="margin-top:12px">
            <div class="small-note">Ù¾Ø³ Ø§Ø² Ø«Ø¨ØªØŒ Ù†Ø§Ù… Ø´Ù…Ø§ Ø¨Ù‡ Ù„ÛŒØ³Øª Ø§Ø¶Ø§ÙÙ‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯ Ùˆ Ø¯ÛŒÚ¯Ø± Ø­Ù‚ Ø«Ø¨Øª Ø¯ÙˆØ¨Ø§Ø±Ù‡ Ù†Ø®ÙˆØ§Ù‡ÛŒØ¯ Ø¯Ø§Ø´Øª Ù…Ú¯Ø± Ø§Ø¯Ù…ÛŒÙ† Ø±ÛŒØ³Øª Ú©Ù†Ø¯.</div>
          </div>
        </div>

        <!-- right: lists -->
        <div>
          <div class="list card" style="padding:12px;">
            <h4>Ø«Ø¨Øªâ€ŒØ´Ø¯Ù‡â€ŒÙ‡Ø§</h4>
            <ul id="rawList"></ul>
            <div style="margin-top:8px">
              <div class="small-note">Ù„ÛŒØ³Øª Ø¢ÙÙ„Ø§ÛŒÙ† Ø°Ø®ÛŒØ±Ù‡â€ŒØ´Ø¯Ù‡ Ø¯Ø± Ù…Ø±ÙˆØ±Ú¯Ø± (localStorage)</div>
            </div>
          </div>

          <div style="height:12px"></div>

          <div class="card" style="padding:12px;">
            <div style="display:flex;justify-content:space-between;align-items:center">
              <div style="font-weight:800;color:var(--accent-yellow)">ÙˆØ¶Ø¹ÛŒØª ØªÛŒÙ…â€ŒÙ‡Ø§</div>
              <div class="counter" id="playersCount">0</div>
            </div>

            <div class="team-grid" style="display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-top:10px">
              <div class="team-box">
                <h4>ğŸ”µ ØªÛŒÙ… A</h4>
                <ul id="teamA"></ul>
              </div>
              <div class="team-box">
                <h4>ğŸ”´ ØªÛŒÙ… B</h4>
                <ul id="teamB"></ul>
              </div>
            </div>

            <div style="margin-top:12px">
              <h4>ğŸ”„ ØªØ¹ÙˆÛŒØ¶ÛŒâ€ŒÙ‡Ø§</h4>
              <ul id="subsList"></ul>
            </div>

            <div class="footer" style="margin-top:12px">
              <div class="small-note">ØªÛŒÙ…â€ŒÙ‡Ø§ Ø¨Ù‡â€ŒØµÙˆØ±Øª Ø´Ø§Ù†Ø³ÛŒ Ùˆ Ù…ØªØ¹Ø§Ø¯Ù„ Ø³Ø§Ø®ØªÙ‡ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯. Ù‡Ø± ØªÛŒÙ… Ø­Ø¯Ø§Ú©Ø«Ø± Ûµ Ù†ÙØ± (Ø¨Ø§ GK) Ø¯Ø§Ø±Ø¯Ø› Ø§Ø¶Ø§ÙÛŒâ€ŒÙ‡Ø§ ØªØ¹ÙˆÛŒØ¶ÛŒ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯.</div>
              <button id="resetBtn" class="reset-btn">ğŸ” Reset (Ø§Ø¯Ù…ÛŒÙ†)</button>
            </div>
          </div>
        </div>
      </div>

    </div>
  </div>
</div>

<!-- admin modal -->
<div id="modal" class="modal-back">
  <div class="modal">
    <h4>Ø±Ù…Ø² Ù…Ø¯ÛŒØ± Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯</h4>
    <input id="adminInput" type="password" placeholder="Ø±Ù…Ø² Ø§Ø¯Ù…ÛŒÙ†" />
    <div id="adminError" style="color:var(--accent-red);display:none;margin-bottom:8px;font-size:13px"></div>
    <div style="display:flex;gap:8px;justify-content:flex-end">
      <button id="cancelAdmin" class="small">Ø§Ù†ØµØ±Ø§Ù</button>
      <button id="confirmAdmin" class="btn">ØªØ§ÛŒÛŒØ¯ Ùˆ Ø±ÛŒØ³Øª</button>
    </div>
  </div>
</div>

<script>
/*
  Team Shuffle â€” single-file final version (offline localStorage)
  Admin password (client-side, for offline use): admin12345
  LocalStorage keys:
    - TS_PLAYERS_V1  : array of entries {id, name, role}
    - TS_DEVICE_ID_V1: unique id for this device (so each device registers once)
*/

const ADMIN_PASSWORD = 'admin12345'; // change if you like (client-side for offline)

const KEY_PLAYERS = 'TS_PLAYERS_V1';
const KEY_DEVICE = 'TS_DEVICE_ID_V1';

function makeDeviceId() {
  let id = localStorage.getItem(KEY_DEVICE);
  if (!id) {
    id = Date.now().toString(36) + Math.random().toString(36).slice(2,8);
    localStorage.setItem(KEY_DEVICE, id);
  }
  return id;
}
const DEVICE_ID = makeDeviceId();

function loadPlayers(){
  try {
    const raw = localStorage.getItem(KEY_PLAYERS);
    return raw ? JSON.parse(raw) : [];
  } catch(e){ return []; }
}
function savePlayers(list){
  localStorage.setItem(KEY_PLAYERS, JSON.stringify(list));
}
function clearPlayers(){
  localStorage.removeItem(KEY_PLAYERS);
}

function shuffle(a){
  for(let i=a.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [a[i],a[j]]=[a[j],a[i]]; }
}

function assignTeamsTwo(players){
  // players: {id,name,role}
  const gks = players.filter(p => p.role === 'gk').slice();
  const field = players.filter(p => p.role === 'player').slice();

  shuffle(gks); shuffle(field);

  const teamA = [], teamB = [], subs = [];

  if(gks.length>0) teamA.push(gks.shift());
  if(gks.length>0) teamB.push(gks.shift());

  let turn = 0;
  for(const p of field){
    const aSize = teamA.length;
    const bSize = teamB.length;
    if(aSize < 5 && bSize < 5){
      if(turn % 2 === 0) teamA.push(p); else teamB.push(p);
      turn++;
    } else if(aSize < 5){
      teamA.push(p);
    } else if(bSize < 5){
      teamB.push(p);
    } else {
      subs.push(p);
    }
  }

  // leftover GK -> subs
  while(gks.length>0) subs.push(gks.shift());

  // balance diff <= 1 by moving players if needed
  function count(t){ return t.length; }
  let safety = 0;
  while(Math.abs(count(teamA)-count(teamB)) > 1 && safety < 40){
    if(count(teamA) > count(teamB)){
      const idx = teamA.findIndex(x => x.role === 'player');
      if(idx >= 0) {
        const moved = teamA.splice(idx,1)[0]; teamB.push(moved);
      } else break;
    } else {
      const idx = teamB.findIndex(x => x.role === 'player');
      if(idx >= 0) {
        const moved = teamB.splice(idx,1)[0]; teamA.push(moved);
      } else break;
    }
    safety++;
  }

  return { teamA, teamB, subs };
}

/* UI helpers */
const splash = document.getElementById('splash');
setTimeout(()=>{ splash.classList.add('hidden'); }, 1200);

const stepName = document.getElementById('step-name');
const stepRole = document.getElementById('step-role');
const toRoleBtn = document.getElementById('toRole');
const nameInput = document.getElementById('nameInput');
const rolePlayer = document.getElementById('rolePlayer');
const roleGk = document.getElementById('roleGk');
const registerBtn = document.getElementById('registerBtn');
const messageBox = document.getElementById('message');
const rawListEl = document.getElementById('rawList');
const teamAEl = document.getElementById('teamA');
const teamBEl = document.getElementById('teamB');
const subsListEl = document.getElementById('subsList');
const playersCountEl = document.getElementById('playersCount');

let selectedRole = null;

toRoleBtn.addEventListener('click', ()=> {
  const name = (nameInput.value || '').trim();
  if(!name){ showMessage('Ù„Ø·ÙØ§Ù‹ Ù†Ø§Ù… Ø®ÙˆØ¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯', 'error'); return; }
  stepName.style.display = 'none';
  stepRole.style.display = 'block';
});

[rolePlayer, roleGk].forEach(el=>{
  el.addEventListener('click', ()=> {
    [rolePlayer, roleGk].forEach(x=>x.classList.remove('active'));
    el.classList.add('active');
    selectedRole = el.dataset.role;
  });
});

registerBtn.addEventListener('click', ()=> {
  const name = (nameInput.value || '').trim();
  if(!name){ showMessage('Ù†Ø§Ù… Ù…Ø¹ØªØ¨Ø± ÙˆØ§Ø±Ø¯ Ú©Ù†', 'error'); return; }
  if(!selectedRole){ showMessage('Ù†Ù‚Ø´ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†', 'error'); return; }

  const players = loadPlayers();
  // check device already registered
  if(players.some(p => p.deviceId === DEVICE_ID)){
    showMessage('Ø´Ù…Ø§ Ù‚Ø¨Ù„Ø§Ù‹ Ø«Ø¨Øª Ù†Ø§Ù… Ú©Ø±Ø¯Ù‡â€ŒØ§ÛŒØ¯ (Ø§ÛŒÙ† Ø¯Ø³ØªÚ¯Ø§Ù‡).', 'error'); return;
  }

  // create entry
  const entry = { id: Date.now().toString(36)+Math.random().toString(36).slice(2,6), deviceId: DEVICE_ID, name, role: selectedRole };
  players.push(entry);
  savePlayers(players);
  // update UI
  showMessage('Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø´Ù…Ø§ Ø«Ø¨Øª Ø´Ø¯ âœ…', 'success');
  // reset local step
  stepRole.style.display = 'none';
  stepName.style.display = 'block';
  nameInput.value = '';
  [rolePlayer, roleGk].forEach(x=>x.classList.remove('active'));
  selectedRole = null;
  renderAll();
});

function showMessage(text, type='success'){
  messageBox.style.display = 'block';
  messageBox.textContent = text;
  messageBox.style.background = type==='success' ? 'linear-gradient(90deg, rgba(0,210,122,0.06), rgba(0,179,255,0.04))' : 'rgba(255,75,75,0.06)';
  messageBox.style.color = type==='success' ? 'var(--accent-green)' : 'var(--accent-red)';
  setTimeout(()=>{ messageBox.style.display = 'none'; }, 3500);
}

function renderAll(){
  const players = loadPlayers();
  // raw list
  rawListEl.innerHTML = '';
  if(players.length === 0){
    rawListEl.innerHTML = '<li style="color:var(--muted)">ÙØ¹Ù„Ø§Ù‹ Ù‡ÛŒÚ†â€ŒÚ©Ø³ Ø«Ø¨Øª Ù†Ø´Ø¯Ù‡</li>';
  } else {
    players.forEach(p=>{
      const li = document.createElement('li');
      li.innerHTML = `<span>${escapeHtml(p.name)}</span><span class="badge">${p.role==='gk' ? 'ğŸ§¤ GK' : 'âš½ player'}</span>`;
      rawListEl.appendChild(li);
    });
  }
  playersCountEl.textContent = players.length;

  // assigned teams
  const result = assignTeamsTwo(players);
  renderTeams(result.teamA, result.teamB, result.subs);
}

function renderTeams(a,b,s){
  teamAEl.innerHTML = '';
  teamBEl.innerHTML = '';
  subsListEl.innerHTML = '';

  if(!a || a.length===0) teamAEl.innerHTML = '<li style="color:var(--muted)">â€” Ø®Ø§Ù„ÛŒ â€”</li>';
  else a.forEach(p=> {
    const li = document.createElement('li');
    li.innerHTML = `<span>${escapeHtml(p.name)}</span><span class="badge">${p.role==='gk' ? 'ğŸ§¤' : 'âš½'}</span>`;
    teamAEl.appendChild(li);
  });

  if(!b || b.length===0) teamBEl.innerHTML = '<li style="color:var(--muted)">â€” Ø®Ø§Ù„ÛŒ â€”</li>';
  else b.forEach(p=> {
    const li = document.createElement('li');
    li.innerHTML = `<span>${escapeHtml(p.name)}</span><span class="badge">${p.role==='gk' ? 'ğŸ§¤' : 'âš½'}</span>`;
    teamBEl.appendChild(li);
  });

  if(!s || s.length===0) subsListEl.innerHTML = '<li style="color:var(--muted)">ØªØ¹ÙˆÛŒØ¶ÛŒâ€ŒØ§ÛŒ Ø«Ø¨Øª Ù†Ø´Ø¯Ù‡</li>';
  else s.forEach(p=> {
    const li = document.createElement('li');
    li.innerHTML = `<span>${escapeHtml(p.name)}</span><span class="badge">ğŸ”</span>`;
    subsListEl.appendChild(li);
  });
}

function escapeHtml(s){ if(!s) return ''; return String(s).replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;'); }

/* admin reset flow (modal) */
const resetBtn = document.getElementById('resetBtn');
const modal = document.getElementById('modal');
const adminInput = document.getElementById('adminInput');
const confirmAdmin = document.getElementById('confirmAdmin');
const cancelAdmin = document.getElementById('cancelAdmin');
const adminError = document.getElementById('adminError');

resetBtn.addEventListener('click', ()=> {
  adminInput.value = ''; adminError.style.display = 'none'; modal.style.display = 'flex';
  setTimeout(()=> adminInput.focus(), 120);
});
cancelAdmin.addEventListener('click', ()=> { modal.style.display = 'none'; adminError.style.display = 'none'; });

confirmAdmin.addEventListener('click', ()=> {
  const v = (adminInput.value || '').trim();
  if(!v){ adminError.textContent = 'Ø±Ù…Ø² Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯'; adminError.style.display = 'block'; return; }
  if(v !== ADMIN_PASSWORD){ adminError.textContent = 'Ø±Ù…Ø² Ø§Ø´ØªØ¨Ø§Ù‡ Ø§Ø³Øª'; adminError.style.display = 'block'; return; }
  // ok -> reset
  clearPlayers();
  modal.style.display = 'none';
  showMessage('ÙÙ‡Ø±Ø³Øª Ù¾Ø§Ú© Ø´Ø¯ â€” Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ø¯ÙˆØ¨Ø§Ø±Ù‡ Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ú©Ù†ÛŒØ¯', 'success');
  renderAll();
});

/* init */
renderAll();

/* ensure UI: if device already registered, disable inputs */
(function checkAlreadyRegistered(){
  const players = loadPlayers();
  if(players.some(p=>p.deviceId === DEVICE_ID)){
    // optionally show a message / keep UI but indicate registered
    showMessage('Ø§ÛŒÙ† Ø¯Ø³ØªÚ¯Ø§Ù‡ Ù‚Ø¨Ù„Ø§Ù‹ Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ú©Ø±Ø¯Ù‡ Ø§Ø³Øª. (Ø¨Ø±Ø§ÛŒ Ø«Ø¨Øª Ù…Ø¬Ø¯Ø¯ Ø¨Ø§ÛŒØ¯ Ø±ÛŒØ³Øª Ø´ÙˆØ¯)', 'info');
  }
})();
</script>
</body>
</html>
