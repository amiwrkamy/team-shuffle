<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Team Picker</title>

<style>
*{box-sizing:border-box;font-family:tahoma}
body{margin:0;color:#fff;background:#0b3d1c}

/* fallback background */
body::before{
  content:"";
  position:fixed;
  inset:0;
  background:url("https://i.imgur.com/6IUbEME.jpg") center/cover no-repeat;
  z-index:-3;
}

/* video */
.video-bg{
  position:fixed;
  inset:0;
  z-index:-2;
}
.video-bg video{
  width:100%;
  height:100%;
  object-fit:cover;
}

/* overlay */
.overlay{
  min-height:100vh;
  background:rgba(0,0,0,.45);
  padding:20px;
}

/* intro */
#intro{
  position:fixed;
  inset:0;
  background:#000;
  display:flex;
  justify-content:center;
  align-items:center;
  z-index:10;
}
.ball{
  font-size:120px;
  animation:zoom 1.8s ease forwards;
}
@keyframes zoom{
  from{transform:scale(3)}
  to{transform:scale(.5);opacity:0}
}

/* card */
.card{
  max-width:420px;
  margin:20px auto;
  background:rgba(0,0,0,.6);
  border-radius:16px;
  padding:16px;
}

/* inputs */
input,button{
  width:100%;
  padding:12px;
  border-radius:10px;
  border:none;
  margin-top:8px;
  font-size:14px;
}
button{
  background:linear-gradient(45deg,#ffd700,#ff9800);
  cursor:pointer;
}

/* teams */
.teams{display:flex;gap:10px;margin-top:20px}
.team{
  flex:1;
  background:rgba(0,0,0,.55);
  border-radius:12px;
  padding:10px;
}
.member{
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
  font-size:13px;
}
</style>
</head>

<body>

<div id="intro"><div class="ball">âš½</div></div>

<div class="video-bg">
  <video muted loop playsinline id="bgVideo">
    <source src="VN20251226_133742.mp4" type="video/mp4">
  </video>
</div>

<div class="overlay">

<div class="card" id="step1">
  <input id="nameInput" placeholder="Ù†Ø§Ù…">
  <button onclick="next()">Ø§Ø¯Ø§Ù…Ù‡</button>
</div>

<div class="card" id="step2" style="display:none">
  <button onclick="join('player')">âš½ Ø¨Ø§Ø²ÛŒÚ©Ù†</button>
  <button onclick="join('gk')">ðŸ§¤ Ø¯Ø±ÙˆØ§Ø²Ù‡â€ŒØ¨Ø§Ù†</button>
</div>

<div class="teams">
  <div class="team"><b>Team A</b><div id="A"></div><b>Subs</b><div id="As"></div></div>
  <div class="team"><b>Team B</b><div id="B"></div><b>Subs</b><div id="Bs"></div></div>
</div>

</div>

<script>
/* intro remove */
setTimeout(()=>document.getElementById("intro").remove(),1800);

/* video safe play */
const v=document.getElementById("bgVideo");
v.play().catch(()=>console.log("autoplay blocked"));

let data=JSON.parse(localStorage.getItem("data"))||{A:[],B:[],As:[],Bs:[],u:[]};

function next(){
  if(!nameInput.value.trim())return alert("Ø§Ø³Ù…");
  if(localStorage.joined)return alert("Ù‚Ø¨Ù„Ø§Ù‹ Ø«Ø¨Øª Ø´Ø¯ÛŒ");
  step1.style.display="none";step2.style.display="block";
}

function join(role){
  let n=nameInput.value.trim();
  let t=Math.random()<.5?"A":"B";
  if(role==="gk"){
    if(data.A.some(x=>x.r==="gk"))t="B";
    if(data.B.some(x=>x.r==="gk"))t="A";
  }
  let arr=data[t];
  if(arr.length<5)arr.push({n,r:role});
  else data[t+"s"].push({n});
  data.u.push(n);
  localStorage.setItem("data",JSON.stringify(data));
  localStorage.joined=1;
  render();
  alert("Ø«Ø¨Øª Ø´Ø¯");
  step2.style.display="none";
}

function render(){
  A.innerHTML=data.A.map(x=>`<div class=member>${x.r==="gk"?"ðŸ§¤":"âš½"} ${x.n}</div>`).join("");
  B.innerHTML=data.B.map(x=>`<div class=member>${x.r==="gk"?"ðŸ§¤":"âš½"} ${x.n}</div>`).join("");
  As.innerHTML=data.As.map(x=>`<div class=member>${x.n}</div>`).join("");
  Bs.innerHTML=data.Bs.map(x=>`<div class=member>${x.n}</div>`).join("");
}
render();
</script>

</body>
</html>
